# shutterfly downloader bookmarklet

Instructions:

1. Drag this "Shutterfly Downloader" link to your browser's "Bookmarks Bar" (Firefox calls it the "Bookmarks Toolbar", Safari calls it the "Favorites Bar"):
  * <a href='javascript:function%20h(tagName,attributes,childNodes)%7Bvar%20el=document.createElement(tagName);for(var%20key%20in%20attributes)%7Bel.setAttribute(key,attributes%5Bkey%5D)%7DchildNodes.forEach(function(childNode)%7Bif(typeof%20childNode===%22string%22)%7BchildNode=document.createTextNode(childNode)%7Del.appendChild(childNode)%7D);return%20el%7Dfunction%20createDownloadURL(id,collectionKey,albumKey,title)%7Bvar%20params=%7Bsite:%22site%22,id:id,collectionKey:collectionKey,albumKey:albumKey,title:title%7D;var%20querystring=Object.keys(params).map(function(key)%7Breturn%20key+%22=%22+params%5Bkey%5D%7D).join(%22&%22);return%22https://cmd.shutterfly.com/commands/async/downloadpicture?%22+querystring%7Dfunction%20readDownloadURLs(sections)%7Bvar%20sections_urls=sections.map(function(section)%7Breturn%20section.items.map(function(item)%7Breturn%20createDownloadURL(item.shutterflyId,section.collectionKey,section.albumKey,item.title)%7D)%7D);return%20Array.prototype.concat.apply(%5B%5D,sections_urls)%7Dfunction%20createUserInterface()%7Breturn%20h(%22nav%22,%7B%7D,%5Bh(%22b%22,%7B%22class%22:%22remaining%22%7D,%5B%22%22%5D),h(%22span%22,%7B%7D,%5B%22%20remaining%20images%20to%20download.%20%22%5D),h(%22button%22,%7B%22class%22:%22start%22%7D,%5B%22Start%22%5D),h(%22button%22,%7B%22class%22:%22stop%22%7D,%5B%22Stop%22%5D),h(%22label%22,%7B%7D,%5Bh(%22span%22,%7B%7D,%5B%22Time%20to%20wait%20between%20downloads:%20%22%5D),h(%22input%22,%7Btype:%22number%22,value:2%7D,%5B%5D),h(%22span%22,%7B%7D,%5B%22%20seconds%22%5D)%5D)%5D)%7Dfunction%20downloadURL(url)%7Bvar%20iframe=h(%22iframe%22,%7Bsrc:url,display:%22none%22%7D,%5B%5D);document.body.appendChild(iframe)%7Dvar%20style=document.head.appendChild(h(%22style%22,%7B%7D,%5B%22%22%5D));style.sheet.insertRule(%22nav%20%7B%20position:%20fixed;%20top:%2010px;%20left:%2010px;%20right:%2010px;%20padding:%205px%2010px;%20background-color:%20#EEE;%20border:%201px%20solid%20#222;%20box-shadow:%200%200%2015px%205px%20rgba(0,%200,%200,%200.75);%20z-index:%201000;%20%7D%22,0);style.sheet.insertRule(%22button%20%7B%20height:%20auto;%20padding:%202px%206px%203px%206px;%20%7D%22,0);style.sheet.insertRule(%22nav%20%3E%20*%20%7B%20margin:%205px;%20%7D%22,0);style.sheet.insertRule(%22label%20%7B%20margin:%205px;%20float:%20right;%20%7D%22,0);style.sheet.insertRule(%22input%20%7B%20width:%2040px;%20text-align:%20right;%20%7D%22,0);if(window.shutterfly_downloader)%7Bwindow.shutterfly_downloader.parentNode.removeChild(window.shutterfly_downloader)%7Dwindow.shutterfly_downloader=document.body.appendChild(createUserInterface());function%20refreshRemaining()%7Bdocument.querySelector(%22.remaining%22).textContent=downloads.length.toString()%7Dvar%20downloads=readDownloadURLs(Shr.P.sections);refreshRemaining();document.querySelector(%22button.start%22).addEventListener(%22click%22,startDownloads);document.querySelector(%22button.stop%22).addEventListener(%22click%22,stopDownloads);function%20startDownloads()%7BclearInterval(window.timer);var%20wait=Math.max(document.querySelector(%22nav%20input%22).value*1e3,10);window.timer=setInterval(function()%7Bvar%20url=downloads.shift();refreshRemaining();if(url)%7BdownloadURL(url)%7Delse%7BstopDownloads()%7D%7D,wait)%7Dfunction%20stopDownloads()%7BclearInterval(window.timer)%7D'>Shutterfly Downloader</a>
2. Go to the [Shutterfly](https://www.shutterfly.com/) album page you want to download (you _must_ be on the main album page, _not_ on one of the individual photos), and click the "All" link to show all images on a single page.
  * You don't _have_ to show all images, but that's the easiest way to download all the images at once.
3. "Open" the `Shutterfly Downloader` bookmark you created in Step 1. This will not open a new page, but will create a new bar at the top of the album page, which looks like this:
  ![Shutterfly Downloader Screenshot](docs/screenshot.png)
4. Click the "Start" button to download all the images in the album.
  * You can "Stop" and adjust the interval to wait between downloads, and then click "Start" to continue where you left off.
5. You may need to click "Allow" if your browser asks if you want to allow the page to download multiple files. This should happen within the first 3 or 4 downloads, and your browser _should_ remember what you chose, so this _should_ only happen once.


## License

Copyright 2014-2015 Christopher Brown. [MIT Licensed](http://opensource.org/licenses/MIT).
